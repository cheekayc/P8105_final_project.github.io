<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Exploratory Analyses</title>

<script src="site_libs/header-attrs-2.16/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/sandstone.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-2.5.1/plotly-latest.min.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="about.html">About</a>
</li>
<li>
  <a href="https://github.com/cheekayc/P8105_final_project.github.io">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a>
    <span class="fa fa-brands fa-youtube"></span>
     
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="statistical_analyses.html">Statistical Analyses</a>
</li>
<li>
  <a href="plot.html">Exploratory Analyses</a>
</li>
<li>
  <a href="forecast.html">Forecast Analyses</a>
</li>
<li>
  <a href="final_report.html">Final Report</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Exploratory Analyses</h1>

</div>


<pre class="r"><code>knitr::opts_chunk$set(message = FALSE)
library(tidyverse)
library(lubridate)
library(plotly)
library(patchwork)
library(ggpubr)
library(ggplot2)</code></pre>
<p>In Exploratory Analyses, we are focusing on product count, unit
price, revenue, and time trend by using pie, donut, bar, line, and
scatter plot.</p>
<p>
 
</p >
<div id="summary-of-packages" class="section level2">
<h2>Summary of packages</h2>
<p>tidyverse, lubridate, plotly, patchwork, ggpubr, ggplot2</p>
<pre class="r"><code>bakery_df =
  read_csv(&quot;./Data/Bakery_sales.csv&quot;) %&gt;% 
  janitor::clean_names() %&gt;% 
  mutate(
    unit_price = str_replace(unit_price, &quot;€&quot;, &quot;&quot;),
    unit_price = str_replace(unit_price, &quot;,&quot;, &quot;.&quot;),
    unit_price = as.numeric(unit_price),
    product_name = article) %&gt;% 
  filter(product_name != &quot;.&quot;) %&gt;% 
  select(-article)</code></pre>
</div>
<div id="introduction-background" class="section level2">
<h2>Introduction &amp; Background</h2>
<p>We used updated version dataset of a French bakery from 2021-01-01 to
2022-09-30. The dataset provides the daily transaction details of
customers. Since the dataset is still updating, we used downloaded
version on 2022-12-03.</p>
<p>The dataset includes:</p>
<p><code>date</code>: date order</p>
<p><code>time</code>: time order</p>
<p><code>ticket number</code>: identifier for every single
transaction</p>
<p><code>article</code>: name of the product sold (in French)</p>
<p><code>quantity</code>: quantity sold</p>
<p><code>unit_price</code>: price per product (in Euro)</p>
<p><code>objective</code>: forecast the sales in order to ease the
production planning</p>
<p>It contains 7 variables and 234000 observations.</p>
<p>
 
</p >
<p>Firstly, we used <code>read_csv()</code> to import the dataset
“Bakery_sales.csv”, and applied <code>janitor::clean_names()</code> to
change the variables’ names into lower cases. Next, we tidied dataset by
applying <code>mutate()</code> to remove the euro sign “€”, change “,”
to “.”, convert <code>unit_price</code> to numeric form, and renamed the
<code>article</code> as <code>product_name</code>. Finally, we deleted
the missing data via <code>filter()</code> and <code>article</code> via
<code>select()</code>.</p>
<p>
 
</p >
</div>
<div id="visualization" class="section level2">
<h2>Visualization</h2>
<div id="top-10-favorite-bakery-products" class="section level3">
<h3>Top 10 favorite bakery products</h3>
<pre class="r"><code>plot_pie =
  bakery_df %&gt;% 
  group_by(product_name) %&gt;% 
  summarize(n_obs = n()) %&gt;% 
  arrange(desc(n_obs)) %&gt;% 
  head(10) %&gt;% 
  plot_ly(labels = ~product_name, values = ~n_obs, type = &#39;pie&#39;, colors = &quot;viridis&quot;) %&gt;% 
  layout(xaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE),
         yaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE))

plot_pie</code></pre>
<div id="htmlwidget-4ccabac38466d409f05e" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-4ccabac38466d409f05e">{"x":{"visdat":{"71874483b4be":["function () ","plotlyVisDat"]},"cur_data":"71874483b4be","attrs":{"71874483b4be":{"labels":{},"values":{},"colors":"viridis","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"pie"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"showgrid":false,"zeroline":false,"showticklabels":false},"yaxis":{"showgrid":false,"zeroline":false,"showticklabels":false},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"labels":["TRADITIONAL BAGUETTE","COUPE","BAGUETTE","BANETTE","CROISSANT","PAIN AU CHOCOLAT","SPECIAL BREAD","CEREAL BAGUETTE","FORMULE SANDWICH","BOULE 400G"],"values":[67689,20470,15292,15130,11508,10578,5195,4961,4202,4099],"type":"pie","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>The pie chart shows the total of sale counts of top 10 favorite
bakery products from 2021-01-01 to 2022-09-30. As the plot shows that
the <code>TRADITIONAL BAGUETTE</code> (67,689; 42.5%) is the most
favorite bakery product. The rest ranking from top 2 to top 10 favorite
bakeries are <code>COUPE</code> (20,470; 12.90%), <code>BAGUETTE</code>
(15,292; 9.61%) <code>BANETTE</code> (15,130; 9.51%),
<code>CROISSANT</code> (11,508; 7.23%), <code>PAIN AU CHOCOLAT</code>
(10,578; 6.65%), <code>SPECIAL BREAD</code> (5195; 3.26%),
<code>CEREAL BAGUETTE</code> (4961; 3.12%),
<code>FORMULE SANDWITCH</code> (4202; 2.64%), and
<code>BOULE 400G</code> (4099; 2.58%), respectively.</p>
<p>
 
</p >
</div>
<div id="top-10-favorite-bakery-products-in-20212022"
class="section level3">
<h3>Top 10 favorite bakery products in 2021/2022</h3>
<pre class="r"><code>plot_pie =
  bakery_df %&gt;% 
  separate(date, into = c(&quot;year&quot;, &quot;month&quot;, &quot;day&quot;), sep = &quot;-&quot;) %&gt;% 
  mutate(year = as.numeric(year),
         month = as.integer(month),
         day = as.integer(day),) 
  
plot_pie_2021 = 
  plot_pie %&gt;% 
  filter(year == 2021) %&gt;%
  group_by(product_name) %&gt;% 
  summarize(n_obs = n()) %&gt;% 
  arrange(desc(n_obs)) %&gt;% 
  head(10) %&gt;% 
  plot_ly(labels = ~product_name, values = ~n_obs) %&gt;% 
  add_pie(hole = 0.6) %&gt;% 
  layout(title = &#39;Top 10 favorite bakery products in 2021&#39;,
         xaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE),
         yaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE))

plot_pie_2022 = 
  plot_pie %&gt;% 
  filter(year == 2022) %&gt;%
  group_by(product_name) %&gt;% 
  summarize(n_obs = n()) %&gt;% 
  arrange(desc(n_obs)) %&gt;% 
  head(10) %&gt;% 
  plot_ly(labels = ~product_name, values = ~n_obs) %&gt;% 
  add_pie(hole = 0.6) %&gt;% 
  layout(title = &#39;Top 10 favorite bakery products in 2022&#39;,
         xaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE),
         yaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE))

plot_pie_2021</code></pre>
<div id="htmlwidget-0201e39f856ddf124689" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-0201e39f856ddf124689">{"x":{"visdat":{"718756c75534":["function () ","plotlyVisDat"]},"cur_data":"718756c75534","attrs":{"718756c75534":{"labels":{},"values":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"pie","hole":0.6,"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Top 10 favorite bakery products in 2021","xaxis":{"showgrid":false,"zeroline":false,"showticklabels":false},"yaxis":{"showgrid":false,"zeroline":false,"showticklabels":false},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"labels":["TRADITIONAL BAGUETTE","COUPE","BAGUETTE","BANETTE","CROISSANT","PAIN AU CHOCOLAT","CEREAL BAGUETTE","SPECIAL BREAD","CAMPAGNE","BOULE 400G"],"values":[37399,11759,8713,8575,6291,5739,3070,2936,2289,2283],"type":"pie","hole":0.6,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<pre class="r"><code>plot_pie_2022</code></pre>
<div id="htmlwidget-425974a033d6c331af60" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-425974a033d6c331af60">{"x":{"visdat":{"718738aaf56e":["function () ","plotlyVisDat"]},"cur_data":"718738aaf56e","attrs":{"718738aaf56e":{"labels":{},"values":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"pie","hole":0.6,"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Top 10 favorite bakery products in 2022","xaxis":{"showgrid":false,"zeroline":false,"showticklabels":false},"yaxis":{"showgrid":false,"zeroline":false,"showticklabels":false},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"labels":["TRADITIONAL BAGUETTE","COUPE","BAGUETTE","BANETTE","CROISSANT","PAIN AU CHOCOLAT","SPECIAL BREAD","FORMULE SANDWICH","CEREAL BAGUETTE","BOULE 400G"],"values":[30290,8711,6579,6555,5217,4839,2259,1976,1891,1816],"type":"pie","hole":0.6,"marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>The first donut chart shows the total of sale counts of top 10
favorite bakery products from 2021-01-01 to 2021-12-31. As the plot
shows that the <code>TRADITIONAL BAGUETTE</code> (37,399; 42%) is the
most favorite bakery . The rest ranking from top 2 to top 10 favorite
bakeries are <code>COUPE</code> (11,759; 13.2%), <code>BAGUETTE</code>
(8713; 9.78%) <code>BANETTE</code> (8575; 9.63%), <code>CROISSANT</code>
(6291; 7.06%), <code>PAIN AU CHOCOLAT</code> (5739; 6.44%),
<code>CEREAL BAGUETTE</code> (3070; 3.45%), <code>SPECIAL BREAD</code>
(2936; 3.3%), <code>CAMPAGNE</code> (2289; 2.57%), and
<code>BOULE 400G</code> (2283; 2.46%), respectively.</p>
<p>The second donut chart shows the total of sale counts of top 10
favorite bakery products from 2022-01-01 to 2022-09-30. As the plot
shows that the <code>TRADITIONAL BAGUETTE</code> (30,290; 43.2%) is the
most favorite bakery . The rest ranking from top 2 to top 10 favorite
bakeries are <code>COUPE</code> (8711; 12.4%), <code>BAGUETTE</code>
(6579; 9.38%) <code>BANETTE</code> (6555; 9.35%), <code>CROISSANT</code>
(5217; 7.44%), <code>PAIN AU CHOCOLAT</code> (4839; 6.9%),
<code>SPECIAL BREAD</code> (2259; 3.22%), <code>FORMULE SANDWITCH</code>
(1976; 2.82%), <code>CEREAL BAGUETTE</code> (1891; 2.7%), and
<code>BOULE 400G</code> (1816; 2.59%), respectively.</p>
<p>Compared donut charts of 2021 and 2022, the ranking of top 1-6
favorite bakeries does not change. <code>CAMPAGNE</code> dropped out of
the top 10 list, and <code>FORMULE SANDWITCH</code> was added the top 10
favorite bakery products in 2022. Top 7-9 moved slightly from 2021 to
2022. Top 10 <code>BOULE 400G</code> stayed in the same position.</p>
<p>
 
</p >
</div>
<div id="top-10-favorite-bread-monthly-sale-counts-in-2021"
class="section level3">
<h3>Top 10 favorite bread monthly sale counts in 2021</h3>
<pre class="r"><code>top_line =
  bakery_df %&gt;% 
  separate(date, into = c(&quot;year&quot;, &quot;month&quot;, &quot;day&quot;), sep = &quot;-&quot;) %&gt;% 
  mutate(year = as.numeric(year),
         month = as.integer(month),
         day = as.integer(day),) %&gt;%
  filter(year == 2021) %&gt;% 
  select (year, month, product_name, quantity) %&gt;% 
  group_by (year, month, product_name) %&gt;% 
  mutate (total_counts = sum (quantity)) %&gt;% 
  distinct(year, month, product_name,total_counts) 

top_line1_2021 =
  top_line %&gt;% 
  filter(product_name %in% c(&quot;TRADITIONAL BAGUETTE&quot;)) %&gt;% 
  ggplot(aes(x =month, y = total_counts, color = product_name)) + 
    geom_line() +
    theme(axis.text.x = element_text(angle=90,hjust = 1), legend.position = &quot;none&quot;) +
    labs(x = &quot;month&quot;,
         y = &quot;counts of TRADITIONAL BAGUETTE&quot;,
         title = &quot;Top 1&quot;) +
    scale_x_continuous(
    breaks = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12), 
    labels = c(&quot;Jan&quot;,&quot;Feb&quot;,&quot;Mar&quot;,&quot;Apr&quot;,&quot;May&quot;, &quot;Jun&quot;, &quot;Jul&quot;, &quot;Aug&quot;, &quot;Sep&quot;, &quot;Oct&quot;, &quot;Nov&quot;, &quot;Dec&quot;)) 

top_line2_2021 =
  top_line %&gt;% 
    filter(product_name %in% c(&quot;COUPE&quot;, &quot;BAGUETTE&quot;,&quot;BANETTE&quot;, &quot;CROISSANT&quot;, &quot;PAIN AU CHOCOLAT&quot;, &quot;CEREAL BAGUETTE&quot;, &quot;SPECIAL BREAD&quot;, &quot;CAMPAGNE&quot;, &quot;BOULE 400G&quot;)) %&gt;% 
  ggplot(aes(x =month, y = total_counts, color = product_name)) + 
    geom_line() +
    theme(axis.text.x = element_text(angle=90,hjust = 1), legend.position = &quot;none&quot;, legend.title = element_text(size=7), legend.text = element_text(size=7)) + 
    labs(x = &quot;month&quot;,
         y = &quot;counts of bread&quot;,
         title = &quot;Top 2-10&quot;) +
    scale_x_continuous(
    breaks = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12), 
    labels = c(&quot;Jan&quot;,&quot;Feb&quot;,&quot;Mar&quot;,&quot;Apr&quot;,&quot;May&quot;, &quot;Jun&quot;, &quot;Jul&quot;, &quot;Aug&quot;, &quot;Sep&quot;, &quot;Oct&quot;, &quot;Nov&quot;, &quot;Dec&quot;))

ggarrange(top_line2_2021, top_line1_2021, ncol=2, nrow=1, common.legend = TRUE, legend=&quot;bottom&quot;)</code></pre>
<p><img src="plot_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>In general, monthly sale counts in 2021 increased dramatically from
June to August.</p>
<p>For <code>TRADITIONAL BAGUETTE</code> (line plot on the right), total
monthly sale counts in 2021 peaked at August (&gt;11,250). However,
total monthly sale counts decreased from May to June, August to
September, and October to December in 2021.</p>
<p>For line plot on the left, total monthly sale counts in 2021 are less
than 3,000 but greater than 500 in every month for top 2-6
(<code>COUPE</code>, <code>BAGUETTE</code>, <code>BANETTE</code>,
<code>CROISSANT</code>, <code>PAIN AU CHOCOLAT</code>). For top 7-10
(<code>CEREAL BAGUETTE</code>, <code>SPECIAL BREAD</code>,
<code>CAMPAGNE</code>, and <code>BOULE 400G</code>), total monthly sale
counts in 2021 are less than 1,000.</p>
<p>
 
</p >
</div>
<div id="top-10-favorite-bread-monthly-sale-counts-in-2022"
class="section level3">
<h3>Top 10 favorite bread monthly sale counts in 2022</h3>
<pre class="r"><code>top_line =
  bakery_df %&gt;% 
  separate(date, into = c(&quot;year&quot;, &quot;month&quot;, &quot;day&quot;), sep = &quot;-&quot;) %&gt;% 
  mutate(year = as.numeric(year),
         month = as.integer(month),
         day = as.integer(day),) %&gt;%
  filter(year == 2022) %&gt;% 
  select (year, month, product_name, quantity) %&gt;% 
  group_by (year, month, product_name) %&gt;% 
  mutate (total_counts = sum (quantity)) %&gt;% 
  distinct(year, month, product_name,total_counts) 

top_line1_2022 =
  top_line %&gt;% 
  filter(product_name %in% c(&quot;TRADITIONAL BAGUETTE&quot;)) %&gt;% 
  ggplot(aes(x =month, y = total_counts, color = product_name)) + 
    geom_line() +
    theme(legend.position = &quot;none&quot;, axis.text.x = element_text(angle=90,hjust = 1)) + 
    labs(x = &quot;month&quot;,
         y = &quot;counts of TRADITIONAL BAGUETTE&quot;,
         title = &quot;Top 1&quot;) +
    scale_x_continuous(
    breaks = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12), 
    labels = c(&quot;Jan&quot;,&quot;Feb&quot;,&quot;Mar&quot;,&quot;Apr&quot;,&quot;May&quot;, &quot;Jun&quot;, &quot;Jul&quot;, &quot;Aug&quot;, &quot;Sep&quot;, &quot;Oct&quot;, &quot;Nov&quot;, &quot;Dec&quot;)) 

top_line2_2022 =
  top_line %&gt;% 
    filter(product_name %in% c(&quot;COUPE&quot;, &quot;BAGUETTE&quot;,&quot;BANETTE&quot;, &quot;CROISSANT&quot;, &quot;PAIN AU CHOCOLAT&quot;, &quot;SPECIAL BREAD&quot;, &quot;FORMULE SANDWICH&quot;,&quot;CEREAL BAGUETTE&quot;, &quot;BOULE 400G&quot;)) %&gt;% 
  ggplot(aes(x =month, y = total_counts, color = product_name)) + 
    geom_line() +
    theme(axis.text.x = element_text(angle=90,hjust = 1), legend.position = &quot;none&quot;, legend.title = element_text(size=7), legend.text = element_text(size=7)) + 
    labs(x = &quot;month&quot;,
         y = &quot;counts of bread&quot;,
         title = &quot;Top 2-10&quot;) +
    scale_x_continuous(
    breaks = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12), 
    labels = c(&quot;Jan&quot;,&quot;Feb&quot;,&quot;Mar&quot;,&quot;Apr&quot;,&quot;May&quot;, &quot;Jun&quot;, &quot;Jul&quot;, &quot;Aug&quot;, &quot;Sep&quot;, &quot;Oct&quot;, &quot;Nov&quot;, &quot;Dec&quot;)) 
 
ggarrange(top_line2_2022, top_line1_2022, ncol=2, nrow=1, common.legend = TRUE, legend=&quot;bottom&quot;)</code></pre>
<p><img src="plot_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>In general, monthly sale counts in 2022 show similar trend as in
2021, but monthly sale counts end at 2022-09-30 due to limited data.</p>
<p>For <code>TRADITIONAL BAGUETTE</code> (line plot on the right), total
monthly sale counts in 2022 peaked at August (&gt;12,500). However,
total monthly sale counts decreased from May to June and August to
September in 2022. Compared to 2021 (&gt;11,250), total monthly sale
counts of <code>TRADITIONAL BAGUETTE</code> is higher in 2022
(&gt;12,500).</p>
<p>For line plot on the left, total monthly sale counts in 2022 are less
than 3,500 but greater than 500 in every month for top 2-6
(<code>COUPE</code>, <code>BAGUETTE</code>, <code>BANETTE</code>,
<code>CROISSANT</code>, <code>PAIN AU CHOCOLAT</code>). For top 7-10
(<code>SPECIAL BREAD</code>, <code>FORMULE SANDWICH</code>,
<code>CEREAL BAGUETTE</code>, and <code>BOULE 400G</code>), total
monthly sale counts in 2022 are less than 600.</p>
<p>
 
</p >
</div>
<div id="ranking-of-mean-prices-of-top-10-products-in-2021"
class="section level3">
<h3>Ranking of mean prices of top 10 products in 2021</h3>
<pre class="r"><code>mean_price_2021 =
  bakery_df %&gt;% 
  separate(date, into = c(&quot;year&quot;, &quot;month&quot;, &quot;day&quot;), sep = &quot;-&quot;) %&gt;% 
  mutate(year = as.numeric(year),
         month = as.integer(month),
         day = as.integer(day)) %&gt;%
  filter(year == 2021) %&gt;% 
  filter(product_name %in% c(&quot;TRADITIONAL BAGUETTE&quot;, &quot;COUPE&quot;, &quot;BAGUETTE&quot;,&quot;BANETTE&quot;, &quot;CROISSANT&quot;, &quot;PAIN AU CHOCOLAT&quot;, &quot;CEREAL BAGUETTE&quot;, &quot;SPECIAL BREAD&quot;, &quot;CAMPAGNE&quot;, &quot;BOULE 400G&quot;)) %&gt;% 
  group_by(product_name) %&gt;% 
  summarize(mean_price = mean(unit_price)) %&gt;% 
  arrange(desc(mean_price)) %&gt;% 
  mutate(product_name = forcats::fct_relevel(product_name, c(&quot;TRADITIONAL BAGUETTE&quot;, &quot;COUPE&quot;, &quot;BAGUETTE&quot;,&quot;BANETTE&quot;, &quot;CROISSANT&quot;, &quot;PAIN AU CHOCOLAT&quot;, &quot;CEREAL BAGUETTE&quot;, &quot;SPECIAL BREAD&quot;, &quot;CAMPAGNE&quot;, &quot;BOULE 400G&quot;))) %&gt;% 
  ggplot(aes(x =product_name, y = mean_price, color = product_name)) + 
      geom_point() +
      geom_text(aes(label=mean_price), vjust = 0, nudge_y = 0.1) +
      ylim(0,3) +
    theme(axis.text.x = element_text(angle=60,hjust = 1), legend.position = &quot;none&quot;) + 
    labs(x = &quot;name of products&quot;,
         y = &quot;mean prices in euro&quot;) 
  
mean_price_2021 </code></pre>
<p><img src="plot_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>The scatter plot shows the ranking of mean prices of top 10 favorite
bakery products in 2021, with most popularity to least popularity
(top1-10) from the left to the right on x-axis.</p>
<p><code>SPECIAL BREAD</code> has the highest mean price (2.4 €) while
<code>COUPE</code> has the lowest mean price (0.15 €). The mean prices
of <code>TRADITIONAL BAGUETTE</code> and <code>PAIN AU CHOCOLAT</code>
are the same (1.2 €).</p>
<p>
 
</p >
</div>
<div id="ranking-of-mean-prices-of-top-10-products-in-2022"
class="section level3">
<h3>Ranking of mean prices of top 10 products in 2022</h3>
<pre class="r"><code>mean_price_2022 =
  bakery_df %&gt;% 
  separate(date, into = c(&quot;year&quot;, &quot;month&quot;, &quot;day&quot;), sep = &quot;-&quot;) %&gt;% 
  mutate(year = as.numeric(year),
         month = as.integer(month),
         day = as.integer(day)) %&gt;%
  filter(year == 2022) %&gt;% 
  filter(product_name %in% c(&quot;TRADITIONAL BAGUETTE&quot;, &quot;COUPE&quot;, &quot;BAGUETTE&quot;,&quot;BANETTE&quot;, &quot;CROISSANT&quot;, &quot;PAIN AU CHOCOLAT&quot;, &quot;SPECIAL BREAD&quot;, &quot;FORMULE SANDWICH&quot;,&quot;CEREAL BAGUETTE&quot;, &quot;BOULE 400G&quot;)) %&gt;% 
  group_by(product_name) %&gt;% 
  summarize(mean_price = mean(unit_price)) %&gt;%
  mutate(across(where(is.numeric), ~ round(., digits = 2))) %&gt;% 
  arrange(desc(mean_price)) %&gt;% 
  mutate(product_name = forcats::fct_relevel(product_name, c(&quot;TRADITIONAL BAGUETTE&quot;, &quot;COUPE&quot;, &quot;BAGUETTE&quot;,&quot;BANETTE&quot;, &quot;CROISSANT&quot;, &quot;PAIN AU CHOCOLAT&quot;, &quot;SPECIAL BREAD&quot;, &quot;FORMULE SANDWICH&quot;,&quot;CEREAL BAGUETTE&quot;, &quot;BOULE 400G&quot;))) %&gt;% 
  ggplot(aes(x =product_name, y = mean_price, color = product_name)) + 
      geom_point() +
      geom_text(aes(label=mean_price), vjust = 0, nudge_y = 0.2) +
      ylim(0,7.5) +
    theme(axis.text.x = element_text(angle=60,hjust = 1), legend.position = &quot;none&quot;) + 
    labs(x = &quot;name of products&quot;,
         y = &quot;mean prices in euro&quot;) 
  
mean_price_2022 </code></pre>
<p><img src="plot_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>The scatter plot shows the ranking of mean prices of top 10 favorite
bakery products in 2022, with most popularity to least popularity
(top1-10) from the left to the right on x-axis. In general, the mean
price of <code>COUPE</code> stayed the same from 2021 to 2022, but mean
prices of other breads increased slightly.</p>
<p><code>FORMULE SANDWICH</code> has the highest mean price (6.94 €)
while <code>COUPE</code> has the lowest mean price (0.15 €). The mean
prices of <code>TRADITIONAL BAGUETTE</code> and
<code>PAIN AU CHOCOLAT</code> are the same (1.27 €)., but both increased
from 1.2 € to 1.27 € when compared to the scatter plot in 2021.</p>
<p>
 
</p >
</div>
<div id="ranking-of-total-revenue-of-top-10-products-in-2021-and-2022"
class="section level3">
<h3>Ranking of total revenue of top 10 products in 2021 and 2022</h3>
<pre class="r"><code>total_rev_bar=
  bakery_df %&gt;% 
  separate(date, into = c(&quot;year&quot;, &quot;month&quot;, &quot;day&quot;), sep = &quot;-&quot;) %&gt;% 
  mutate(year = as.numeric(year),
         month = as.integer(month),
         day = as.integer(day)) %&gt;%
  group_by(year, product_name) %&gt;% 
  mutate(rev = quantity * unit_price) %&gt;% 
  summarize(prod_rev = sum(rev)) %&gt;% 
  arrange(desc(prod_rev)) 
  
total_rev_bar_2021=
  total_rev_bar %&gt;% 
  filter(year == 2021) %&gt;% 
  filter(product_name %in% c(&quot;TRADITIONAL BAGUETTE&quot;, &quot;COUPE&quot;, &quot;BAGUETTE&quot;,&quot;BANETTE&quot;, &quot;CROISSANT&quot;, &quot;PAIN AU CHOCOLAT&quot;, &quot;CEREAL BAGUETTE&quot;, &quot;SPECIAL BREAD&quot;, &quot;CAMPAGNE&quot;, &quot;BOULE 400G&quot;)) %&gt;% 
  mutate(product_name = fct_reorder(product_name, prod_rev)) %&gt;% 
  mutate(across(where(is.numeric), ~ round(., digits = 2))) %&gt;% 
  ggplot(aes(x =product_name, y= prod_rev, fill=product_name)) + 
    geom_bar(stat=&quot;identity&quot;, width=0.5) +
    geom_text(aes(label=prod_rev), vjust = 0, nudge_y = 100, size=3) +
    ylim(0,80000) +
    labs(x = &quot;name of products&quot;,
         y = &quot;total revenue in euro&quot;,
         title = &quot;ranking in 2021&quot;) +
  theme(axis.text.x = element_text(angle = 15, hjust = 1), legend.position = &quot;none&quot;)
  
total_rev_bar_2022=
  total_rev_bar %&gt;% 
  filter(year == 2022) %&gt;% 
  filter(product_name %in% c(&quot;TRADITIONAL BAGUETTE&quot;, &quot;COUPE&quot;, &quot;BAGUETTE&quot;,&quot;BANETTE&quot;, &quot;CROISSANT&quot;, &quot;PAIN AU CHOCOLAT&quot;, &quot;SPECIAL BREAD&quot;, &quot;FORMULE SANDWICH&quot;,&quot;CEREAL BAGUETTE&quot;, &quot;BOULE 400G&quot;)) %&gt;% 
  mutate(product_name = fct_reorder(product_name, prod_rev)) %&gt;%
  mutate(across(where(is.numeric), ~ round(., digits = 2))) %&gt;% 
  ggplot(aes(x =product_name, y= prod_rev, fill=product_name)) + 
    geom_bar(stat=&quot;identity&quot;, width=0.5) +
    geom_text(aes(label=prod_rev), vjust = 0, nudge_y = 100, size=3) +
    ylim(0,80000) +
    labs(x = &quot;name of products&quot;,
         y = &quot;total revenue in euro&quot;,
         title = &quot;ranking in 2022&quot;) +
  theme(axis.text.x = element_text(angle = 15, hjust = 1), legend.position = &quot;none&quot;)
 
ggarrange(total_rev_bar_2021, total_rev_bar_2022,  heights = c(5, 5),
          ncol = 1, nrow = 2)</code></pre>
<p><img src="plot_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>The bar chart shows the ranking of total revenue of top 10 products
in 2021 and 2022. The total revenues of
<code>TRADITIONAL BAGUETTE</code> are the highest (78742.8 € in 2021;
66013.25 € in 2022) while the total revenues of <code>COUPE</code> are
the lowest (2049.9 € in 2021; 1475.85 € in 2022) in the two years
respectively. The total revenues of <code>TRADITIONAL BAGUETTE</code> is
approximately 38 times the total revenues of <code>COUPE</code> in 2021
and 45 times of that in 2022.</p>
<p>
 
</p >
</div>
<div id="distribution-of-monthly-revenue-in-2021-and-2022"
class="section level3">
<h3>Distribution of monthly revenue in 2021 and 2022</h3>
<pre class="r"><code>dis_rev_bar=
  bakery_df %&gt;% 
  separate(date, into = c(&quot;year&quot;, &quot;month&quot;, &quot;day&quot;), sep = &quot;-&quot;) %&gt;% 
  mutate(year = as.numeric(year),
         month = as.integer(month),
         day = as.integer(day),) 

dis_rev_bar_2021=
  dis_rev_bar %&gt;%
    filter(year == 2021,
         product_name %in% c(&quot;TRADITIONAL BAGUETTE&quot;, &quot;COUPE&quot;, &quot;BAGUETTE&quot;,&quot;BANETTE&quot;, &quot;CROISSANT&quot;, &quot;PAIN AU CHOCOLAT&quot;, &quot;CEREAL BAGUETTE&quot;, &quot;SPECIAL BREAD&quot;, &quot;CAMPAGNE&quot;, &quot;BOULE 400G&quot;)) %&gt;% 
  group_by(year, month, product_name) %&gt;% 
  mutate(rev = quantity * unit_price) %&gt;% 
  summarize(prod_dis_rev = sum(rev)) %&gt;% 
  arrange(desc(prod_dis_rev)) %&gt;% 
   mutate(product_name = fct_reorder(product_name, prod_dis_rev)) %&gt;% 
    ggplot(aes(x =month, y= prod_dis_rev, fill=product_name)) + 
    scale_fill_viridis_d()+
    geom_bar(stat=&quot;identity&quot;, position=&quot;stack&quot;) +
    labs(x = &quot;month&quot;,
         y = &quot;total revenue in euro&quot;,
         title = &quot;Distribution of monthly revenue in 2021&quot;) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1), legend.position = &quot;right&quot;, legend.title = element_text(size=7), legend.text = element_text(size=7), legend.key.size = unit(0.2, &#39;cm&#39;)) +
  scale_x_continuous(
    breaks = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12), 
    labels = c(&quot;Jan&quot;,&quot;Feb&quot;,&quot;Mar&quot;,&quot;Apr&quot;,&quot;May&quot;, &quot;Jun&quot;, &quot;Jul&quot;, &quot;Aug&quot;, &quot;Sep&quot;, &quot;Oct&quot;, &quot;Nov&quot;, &quot;Dec&quot;)) 

dis_rev_bar_2022=
  dis_rev_bar %&gt;%
    filter(year == 2022,
         product_name %in% c(&quot;TRADITIONAL BAGUETTE&quot;, &quot;COUPE&quot;, &quot;BAGUETTE&quot;,&quot;BANETTE&quot;, &quot;CROISSANT&quot;, &quot;PAIN AU CHOCOLAT&quot;, &quot;SPECIAL BREAD&quot;, &quot;FORMULE SANDWICH&quot;,&quot;CEREAL BAGUETTE&quot;, &quot;BOULE 400G&quot;)) %&gt;% 
  group_by(year, month, product_name) %&gt;% 
  mutate(rev = quantity * unit_price) %&gt;% 
  summarize(prod_dis_rev = sum(rev)) %&gt;% 
  arrange(desc(prod_dis_rev)) %&gt;% 
   mutate(product_name = fct_reorder(product_name, prod_dis_rev)) %&gt;% 
    ggplot(aes(x =month, y= prod_dis_rev, fill=product_name)) + 
    scale_fill_viridis_d()+
    geom_bar(stat=&quot;identity&quot;, position=&quot;stack&quot;) +
    labs(x = &quot;month&quot;,
         y = &quot;total revenue in euro&quot;,
         title = &quot;Distribution of monthly revenue in 2022&quot;) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1), legend.position = &quot;right&quot;,legend.title = element_text(size=7), legend.text = element_text(size=7), legend.key.size = unit(0.2, &#39;cm&#39;)) +
  scale_x_continuous(
    breaks = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12), 
    labels = c(&quot;Jan&quot;,&quot;Feb&quot;,&quot;Mar&quot;,&quot;Apr&quot;,&quot;May&quot;, &quot;Jun&quot;, &quot;Jul&quot;, &quot;Aug&quot;, &quot;Sep&quot;, &quot;Oct&quot;, &quot;Nov&quot;, &quot;Dec&quot;)) 

ggarrange(dis_rev_bar_2021, dis_rev_bar_2022,  heights = c(5, 5),
          ncol = 1, nrow = 2)</code></pre>
<p><img src="plot_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>The bar plots show distributions of monthly revenue in 2021 and 2022.
<code>TRADITIONAL BAGUETTE</code> has the largest proportion of monthly
revenues (around 50%) in 2021 and 2022. Moreover, the revenue trend from
Jan to Dec is similar in 2021 and 2022. Since the bakery sold more
products in summer than winter, and reached peak in August, we could
expect higher revenue in summer than winter, and the highest revenue in
August.</p>
<p>
 
</p >
<div id="summary" class="section level4">
<h4>Summary</h4>
<p><code>TRADITIONAL BAGUETTE</code> is the most favorite bread in this
French bakery store. French people LOVE TRADITIONAL BAGUETTE.</p>
</div>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
